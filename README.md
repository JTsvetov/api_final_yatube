# api_final
## Проект «API для Yatube»


### Описание

Проект является финальным заданием 9 спринта блока "API: интерфейс взаимодействия программ" учебного курса яндекс практикум.

Проект представляет собой реализацию REST API-сервиса для социальной сети блогеров Yatube и выполняет задачу по обеспечению взаимодействия с ресурсами этой социальной сети[^1].


### Ключевые моменты

- Для аутентификации используются JWT-токены.
- У неаутентифицированных пользователей доступ к API только на чтение. 
Исключение — эндпоинт /follow/: доступ к нему предоставляется только аутентифицированным пользователям.
- Аутентифицированным пользователям разрешено изменение и удаление своего контента; в остальных случаях доступ предоставляется только для чтения.
- Добавление новых пользователей через API не предусмотренно.


### Технологии

- Python 3.9.8
- Django 2.2.16
- Django REST Framework 3.12.4
- библиотеки  Djoser и Simple JWT 4.7.2


### Запуск проекта

Клонировать репозиторий и перейти в него в командной строке:

```
git clone https://github.com/JTsvetov/api_final_yatube.git
```
```
cd api_final_yatube
```
Cоздать и активировать виртуальное окружение:

```
python -m venv venv
```
```
source venv/Scripts/activate
```
Установить зависимости из файла requirements.txt:

```
python -m pip install --upgrade pip
```
```
pip install -r requirements.txt
```

Выполнить миграции:

```
python manage.py migrate
```

Запустить проект:

```
python manage.py runserver
```

### Документация

Когда вы запустите проект, будет доступна [документация](http://127.0.0.1:8000/redoc/) с описанием работы API Yatube. Документация представлена в формате Redoc.



### Примеры запросов к API

#### 1. Пример аутентификации

Доступные эндпоинты

- Получение JWT-токена http://127.0.0.1:8000/api/v1/jwt/create/
- Обновление JWT-токена http://127.0.0.1:8000/api/v1/jwt/refresh/
- Проверка JWT-токена http://127.0.0.1:8000/api/v1/jwt/verify/

Чтобы получить токен отправьте POST-запрос на эндпоинт /jwt/create/, передав действующий логин и пароль в полях username и password.

<sub>Пример ответа:</sub>
```
{
    "refresh": "...",
    "access": "..."
}
```

В ответе API токен вернётся в поле access, а данные из поля refresh нужны для обновления токена.


#### 2. Пример работы с постами

При работе с постами в проекте используется класс для пагинации LimitOffsetPagination, что даёт возможность клиенту самостоятельно определять, какое число объектов вернётся (параметр limit) и с какого по счёту объекта начать отсчёт (параметр offset). При пагинации записи отсортировываются по дате добавления.

**Пример запроса списка постов при использовании пагинации:**

**GET http://127.0.0.1:8000/api/v1/posts/?limit=2&offset=4**

<sub>Пример ответа со списоком всех постов:</sub>
```
{
"count": 123,
"next": "http://api.example.org/accounts/?offset=400&limit=100",
"previous": "http://api.example.org/accounts/?offset=200&limit=100",
"results": [
  {
    "id": 0,
    "author": "string",
    "text": "string",
    "pub_date": "2019-08-24T14:15:22Z",
    "image": "string",
    "group": 0
  }
  {...}
]
```

**Пример запроса на публикацию поста:**

**POST http://127.0.0.1:8000/api/v1/posts/**

<sub>Передаваемые данные:</sub>
```
{
"text": "string",
"image": "string",
"group": 0
}
```
<sub>Пример ответа с параметрами созданного поста:</sub>
```
{
"id": 0,
"author": "string",
"text": "string",
"pub_date": "2019-08-24T14:15:22Z",
"image": "string",
"group": 0
}
```

#### 3. Пример работы с комментариями

**Пример запроса на добавление комментария:**

**POST http://127.0.0.1:8000/api/v1/posts/1/comments/**

<sub>Передаваемые данные:</sub>
```
{
"text": "string"
}
```
<sub>Пример ответа с параметрами созданного комментария:</sub>
```
{
"id": 1,
"author": "string",
"text": "string",
"created": "2019-08-24T14:15:22Z",
"post": 1
}
```

#### 4. Функция поиска при работе с подписками

**Запрос: GET http://127.0.0.1:8000/api/v1/follow/?search=**

В проекте используется встроенный бэкенд SearchFilter из библиотеки filters для поиска по содержимому полей связанных моделей. При работе с подписками возможен поиск среди них по параметру search.



***Более подробную информацию по работе API Yatube, с описанием поддерживаемых методов запросов, примерами запросов и ответов можно найти в [документации](http://127.0.0.1:8000/redoc/).***


### Авторы

Цветов Евгений




[^1]: <sup>Проект Yatube разрабатывался в ходе обучения в модуле "Бэкенд на Django". 
Yatube — это платформа для публикаций, блог. У пользователей есть возможность регистрироваться в сети, публиковать записи, просматривать чужие записи, подписываться на интересующих авторов.</sup>